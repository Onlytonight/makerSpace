<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.qks.makerSpace.dao.PropertyDao">
    <select id="getPropertyById" resultType="com.qks.makerSpace.entity.Property">
        select *
        from property
        where property_id = #{id}
    </select>

    <select id="getPropertyIdByEnterpriseId" resultType="String">
        select property_id propertyId
        from connect
        where enterprise_id = #{id}
    </select>

    <select id="getAllProperty" resultType="com.qks.makerSpace.entity.Property">
        select property.property_id propertyId,connect.enterprise_id enterpriseId,connect.team_name teamName,
               property.applications,property.granted,property.valid
        from property,connect
        where connect.property_id = property.property_id
    </select>

    <insert id="addProperty" parameterType="Map">
        insert into property(property_id,applications,applications_patent,patent_num,
                             soft_num,trademark_num,granted,granted_patent,valid,valid_patent,
                             soft_copyright,plant_variety,ic_layout,foreign_patents,
                             contract_transaction,contract_turnover,project_num,awards)
        values (#{propertyId}, #{applications}, #{applicationsPatent}, #{patentNum}, #{softNum},
                #{trademarkNum}, #{granted}, #{grantedPatent}, #{valid}, #{validPatent},
                #{softCopyright}, #{plantVariety}, #{icLayout}, #{foreignPatents},
                #{contractTransaction}, #{contractTurnover}, #{projectNum},#{awards})

    </insert>

    <update id="updateConnect">
        update connect
        set property_id = #{propertyId}
        where enterprise_id = #{enterpriseId}
    </update>

    <delete id="deleteProperty">
        delete from property
        where property_id = #{id}
    </delete>

    <update id="updateProperty" parameterType="Map">
        update property
        <set>
            <if test="applications != null">
                applications = #{applications}
            </if>
            <if test="applicationsPatent != null">
                applications_patent = #{applicationsPatent}
            </if>
            <if test="patentNum != null">
                patent_num = #{patentNum}
            </if>
            <if test="softNum != null">
                soft_num = #{softNum}
            </if>
            <if test="trademarkNum != null">
                trademark_num = #{trademarkNum}
            </if>
            <if test="beGranted != null">
                be_granted = #{beGranted}
            </if>
            <if test="grantedPatent != null">
                granted_patent = #{grantedPatent}
            </if>
            <if test="valid != null">
                valid = #{valid}
            </if>
            <if test="validPatent != null">
                valid_patent = #{validPatent}
            </if>
            <if test="softCopyright != null">
                soft_copyright = #{softCopyright}
            </if>
            <if test="icLayout != null">
                ic_layout = #{icLayout}
            </if>
            <if test="foreignPatents != null">
                foreign_patents = #{foreignPatents}
            </if>
            <if test="contractTransaction != null">
                contract_transaction = #{contractTransaction}
            </if>
            <if test="contractTurnover != null">
                contract_turnover = #{contractTurnover}
            </if>
            <if test="projectNum != null">
                project_num = #{projectNum}
            </if>
            <if test="awards != null">
                awards = #{awards}
            </if>
        </set>
        where property_id = #{propertyId}
    </update>

</mapper>