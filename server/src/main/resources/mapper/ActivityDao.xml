<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.qks.makerSpace.dao.ActivityDao">
    <select id="getOneActivityById" resultType="com.qks.makerSpace.entity.Activity">
        select *
        from activity
        where activity_id = #{id}
    </select>
    
    <select id="getAllActivity" resultType="com.qks.makerSpace.entity.Activity">
        select activity.activity_id,connect.enterprised_id,
               activity.under_projects,activity.national_project,
               activity.expenditure
        from activity,connect;
        where connect.activity_id = activity.activity_id
    </select>
    
    <insert id="addActivity" parameterType="Map">
        insert into activity(activity_id,under_projects,national_project,
                            expenditure,rad_expenditure,product_expenditure,
                             government_grant,self_raised)
        values (#{activityId},#{underProjects},#{nationalProject},
                #{expenditure},#{radExpenditure},#{productExpenditure},
                #{governmentGrant},#{selfRaised})
    </insert>

    <update id="updateConnect">
        update connect
        set activity_id = #{activityId}
        where enterprise_id = #{enterpriseId}
    </update>
    
    <delete id="deleteActivity">
        delete from activity
        where activity_id = #{id}
    </delete>

    <update id="updateActivity" parameterType="Map">
        update activity
        <set>
            <if test="underProjects != null">
                under_projects = #{underProjects}
            </if>
            <if test="nationalProject != null">
                national_project = #{nationalProject}
            </if>
            <if test="expenditure != null">
                expenditure = #{expenditure}
            </if>
            <if test="radExpenditure != null">
                rad_expenditure = #{radExpenditure}
            </if>
            <if test="productExpenditure != null">
                product_expenditure = #{productExpenditure}
            </if>
            <if test="governmentGrant != null">
                government_grant = #{governmentGrant}
            </if>
            <if test="selfRaised != null">
                sel_raised = #{selfRaised}
            </if>

        </set>
        where activity_id = #{activityId}
    </update>

</mapper>